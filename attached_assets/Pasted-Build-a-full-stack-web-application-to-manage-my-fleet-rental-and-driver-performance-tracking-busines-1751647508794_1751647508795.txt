Build a full-stack web application to manage my fleet rental and driver performance tracking business. Use the following tech stack:

ðŸ§° Tech Stack:
- Next.js 14 (App Router) + TypeScript
- MongoDB with Mongoose
- Tailwind CSS + shadcn/ui
- Zod for validation
- Recharts for graph
- Optional: NextAuth for login

---

ðŸš˜ Business Case:
I lease cars from two companies: PMV and Letzryd.  
Each vehicle has two drivers (morning and evening shift).  
Drivers take Uber trips daily and pay me fixed rent.  
I pay the vehicle company (PMV or Letzryd) rent based on **trip-based weekly slabs**.  
I want the system to track:
- Daily Uber trips per driver
- Rent paid by each driver (pending/paid)
- Rent payable to company (PMV or Letzryd) based on slab
- Weekly profit/loss per vehicle
- All unpaid rents across all time
- Graph to compare profits between vehicles

---

ðŸ“¦ MongoDB Collections:

1. Vehicle:
```ts
{
  vehicleNumber: string,
  company: "PMV" | "Letzryd",
  assignedDrivers: [ObjectId, ObjectId]
}
Driver:
{
  name: string,
  phone: string,
  hasAccommodation: boolean // true = â‚¹600/day, false = â‚¹500/day
}
Trip:
{
  vehicleId: ObjectId,
  driverId: ObjectId,
  shift: "morning" | "evening",
  tripCount: number,
  tripDate: Date
}
DriverRentLog:
{
  driverId: ObjectId,
  date: Date,
  rent: number,  // 500 or 600
  paid: boolean
}
WeeklySettlement:
{
  vehicleId: ObjectId,
  weekStart: Date,
  weekEnd: Date,
  totalTrips: number,
  rentalRate: number,
  totalRentToCompany: number,
  driver1: { id: ObjectId, rent: number },
  driver2: { id: ObjectId, rent: number },
  totalDriverRent: number,
  profit: number,
  paid: boolean
}
ðŸ“Š Rental Slab Logic:
Letzryd:
140+ trips â†’ â‚¹260/day
125â€“139 â†’ â‚¹380/day
110â€“124 â†’ â‚¹470/day
80â€“109 â†’ â‚¹600/day
65â€“79 â†’ â‚¹710/day
<65 â†’ â‚¹950/day
PMV:
140+ trips â†’ â‚¹150/day
135â€“139 â†’ â‚¹249/day
120â€“134 â†’ â‚¹444/day
80â€“119 â†’ â‚¹640/day
65â€“79 â†’ â‚¹750/day
<65 â†’ â‚¹949/day
ðŸ’¸ Driver Rent Logic:
â‚¹600/day if accommodation is given
â‚¹500/day if not
Rent logged daily and marked as â€œpaidâ€ or â€œpendingâ€
All-time unpaid driver rents should be visible in dashboard
ðŸ“ˆ Weekly Profit Formula:
Total trips = trips of both drivers combined
Rental Rate = based on company & total trips (slab)
Rent to company = rate Ã— 7 days
Driver rent = â‚¹600 or â‚¹500 Ã— 7 days Ã— 2 drivers
Profit = Driver Rent Collected â€“ Company Rent Paid
ðŸ§  Dashboard Features:
âœ… When a vehicle is selected:
Total trips this week
Current slab rental rate
Tip: â€œX more trips needed for cheaper rental slabâ€
Total rent payable to Letzryd/PMV
âœ… Driver Info:
Driver name
Trips done this week
Daily rent Ã— days = due
Toggle rent from pending to paid
All-time unpaid rents section
âœ… Weekly Profit Section:
Shows Income â€“ Expense = Profit
Color code: green = profit, red = loss
âœ… Graph Section:
Bar chart showing profit/loss for each vehicle
x-axis: vehicle number
y-axis: â‚¹ profit
Use Recharts for this
ðŸ”Œ APIs to Build:
GET /api/vehicle/:id/weekly-summary
POST /api/driver/:id/rent-status
GET /api/driver/unpaid-rents
GET /api/dashboard/profit-graph
POST /api/settlements
ðŸ“‚ Components to Build:
VehicleSelector â€“ choose a vehicle
VehicleSummaryCard â€“ trip total, slab details, rent tip
DriverRentCard â€“ show rent & toggle status
UnpaidDriversPanel â€“ global pending list
ProfitGraph â€“ bar chart with Recharts
SettlementRunner â€“ trigger weekly settlement
âœ… Must-Have Functions:
getRentalRate(company: "PMV" | "Letzryd", tripCount: number): number
getNextRentalTarget(company, tripCount): { nextRate: number, neededTrips: number }
ðŸ§ª Use Zod to validate:
Trip logs
Rent logs
Settlement creation
Driver assignments
ðŸŽ¯ Final Goal:
A working fleet management system that:
Tracks trip count daily
Calculates dynamic rental rate weekly
Collects and tracks driver rent
Tracks rent payable to companies (Letzryd/PMV)
Calculates and visualizes weekly profit
Keeps full history of unpaid rents
Compares profit per vehicle visually via dashboard

---

### âœ… How to Use:
1. Open **Replit** and go to the â€œAsk AIâ€ or â€œGhostwriterâ€ panel  
2. **Paste the full prompt above**  
3. Let it generate the full project (or build one module at a time)

Let me know if you'd like:
- The **folder structure**
- The `getRentalRate()` helper function
- A starting schema or dashboard layout

We can now build from this foundation ðŸ”§